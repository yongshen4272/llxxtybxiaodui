<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>刘霖学校2025年秋季校队情况统计</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: "Microsoft YaHei", sans-serif;
        }
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eee;
        }
        .section-title {
            background-color: #3498db;
            color: white;
            padding: 10px 15px;
            border-radius: 5px;
            margin: 20px 0 15px;
            font-size: 1.2em;
        }
        .search-box {
            margin: 20px 0;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }
        .search-box input {
            flex: 1;
            min-width: 200px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        .search-box button {
            padding: 10px 20px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        .search-box button:hover {
            background-color: #2980b9;
        }
        .class-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        .class-card {
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
            background: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .class-header {
            background-color: #2c3e50;
            color: white;
            padding: 10px 15px;
            font-weight: bold;
        }
        .team-list {
            padding: 10px;
        }
        .team-item {
            margin-bottom: 10px;
            border-bottom: 1px dashed #eee;
            padding-bottom: 10px;
        }
        .team-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            padding: 5px 0;
        }
        .team-name {
            font-weight: bold;
            color: #2c3e50;
            display: flex;
            align-items: center;
        }
        .team-count {
            background-color: #3498db;
            color: white;
            border-radius: 10px;
            padding: 2px 8px;
            font-size: 0.8em;
            margin-left: 8px;
        }
        .student-list {
            padding-left: 15px;
            color: #555;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }
        .student-list.expanded {
            max-height: 500px;
        }
        .student-item {
            margin-bottom: 3px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 3px 0;
        }
        .student-name {
            flex: 1;
        }
        .admin-controls {
            display: none;
        }
        .no-results {
            text-align: center;
            padding: 20px;
            color: #7f8c8d;
            font-style: italic;
        }
        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #ddd;
        }
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border: 1px solid transparent;
            border-bottom: none;
            border-radius: 5px 5px 0 0;
            margin-right: 5px;
            background-color: #f8f9fa;
        }
        .tab.active {
            background-color: white;
            border-color: #ddd;
            border-bottom-color: white;
            margin-bottom: -1px;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .summary {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 20px;
            text-align: center;
        }
        .admin-panel {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 5px;
            margin-top: 30px;
            border: 1px solid #ddd;
        }
        .admin-login {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        .admin-login input {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .admin-login button {
            padding: 8px 15px;
            background-color: #2c3e50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .admin-actions {
            display: none;
            margin-top: 15px;
        }
        .admin-form {
            background-color: white;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            border: 1px solid #ddd;
        }
        .admin-form h3 {
            margin-bottom: 15px;
            color: #2c3e50;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-group input, .form-group select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }
        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .btn-primary {
            background-color: #3498db;
            color: white;
        }
        .btn-danger {
            background-color: #e74c3c;
            color: white;
        }
        .btn-success {
            background-color: #2ecc71;
            color: white;
        }
        .logout-btn {
            background-color: #95a5a6;
            color: white;
            padding: 5px 10px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-left: 10px;
        }
        .delete-btn {
            background-color: #e74c3c;
            color: white;
            border: none;
            border-radius: 3px;
            padding: 2px 6px;
            cursor: pointer;
            font-size: 12px;
        }
        .edit-btn {
            background-color: #f39c12;
            color: white;
            border: none;
            border-radius: 3px;
            padding: 2px 6px;
            cursor: pointer;
            font-size: 12px;
            margin-right: 5px;
        }
        .admin-status {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        .expand-icon {
            margin-left: 5px;
            transition: transform 0.3s ease;
        }
        .team-header.expanded .expand-icon {
            transform: rotate(180deg);
        }
        @media (max-width: 768px) {
            .class-list {
                grid-template-columns: 1fr;
            }
            .admin-login {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>刘霖学校2025年秋季9月份校队情况统计</h1>
        
        <div class="summary">
            <p>全校共计26支校队，总计428名校队学生</p>
        </div>
        
        <div class="search-box">
            <input type="text" id="searchInput" placeholder="输入班级、校队或学生姓名进行搜索...">
            <button id="searchButton">搜索</button>
            <button id="resetButton">重置</button>
        </div>
        
        <div class="tabs">
            <div class="tab active" data-tab="primary">小学部</div>
            <div class="tab" data-tab="middle">初中部</div>
        </div>
        
        <div class="tab-content active" id="primary-content">
            <h2 class="section-title">小学部校队情况</h2>
            <div class="class-list" id="primary-classes">
                <!-- 小学部班级内容将通过JavaScript动态生成 -->
            </div>
        </div>
        
        <div class="tab-content" id="middle-content">
            <h2 class="section-title">初中部校队情况</h2>
            <div class="class-list" id="middle-classes">
                <!-- 初中部班级内容将通过JavaScript动态生成 -->
            </div>
        </div>
        
        <div class="admin-panel">
            <h2 class="section-title">后台管理系统</h2>
            <div class="admin-login" id="adminLogin">
                <input type="text" id="adminUsername" placeholder="管理员账号">
                <input type="password" id="adminPassword" placeholder="管理员密码">
                <button id="loginButton">登录</button>
            </div>
            <div class="admin-actions" id="adminActions">
                <div class="admin-status">
                    <span>管理员已登录</span>
                    <button class="logout-btn" id="logoutButton">退出登录</button>
                </div>
                <div class="form-actions">
                    <button class="btn btn-primary" id="addStudentBtn">添加学生</button>
                    <button class="btn btn-success" id="addTeamBtn">添加校队</button>
                </div>
                
                <div class="admin-form" id="addStudentForm" style="display: none;">
                    <h3>添加学生到校队</h3>
                    <div class="form-group">
                        <label for="studentName">学生姓名</label>
                        <input type="text" id="studentName" placeholder="请输入学生姓名">
                    </div>
                    <div class="form-group">
                        <label for="studentClass">班级</label>
                        <input type="text" id="studentClass" placeholder="请输入班级，如X2101">
                    </div>
                    <div class="form-group">
                        <label for="studentTeam">所属校队</label>
                        <select id="studentTeam">
                            <!-- 校队选项将通过JavaScript动态生成 -->
                        </select>
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-primary" id="saveStudentBtn">保存</button>
                        <button class="btn" id="cancelStudentBtn">取消</button>
                    </div>
                </div>
                
                <div class="admin-form" id="addTeamForm" style="display: none;">
                    <h3>添加新校队</h3>
                    <div class="form-group">
                        <label for="newTeamName">校队名称</label>
                        <input type="text" id="newTeamName" placeholder="请输入校队名称">
                    </div>
                    <div class="form-group">
                        <label for="newTeamType">学部</label>
                        <select id="newTeamType">
                            <option value="primary">小学部</option>
                            <option value="middle">初中部</option>
                        </select>
                    </div>
                    <div class="form-actions">
                        <button class="btn btn-primary" id="saveTeamBtn">保存</button>
                        <button class="btn" id="cancelTeamBtn">取消</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 校队数据
        let teamData = {
            // 小学部校队
            primary: {
                "小学啦啦操": ["X2304-张馨仪", "X2303-张书宁", "X2302-覃钰茜", "X2302-尹宝乐", "X2302-孟科言", "X2302-孙悠婼", "X2205-吴佳钰", "X2203-伍芯媛", "X2203-滕梓涵", "X2203-向籽涵", "X2202-段雅轩", "X2201-刘璐绮", "X2201-卢红萍", "X2106-谢艾希", "X2106-纪一可", "X2106-张欣蕾", "X2106-李可欣", "X2106-彭梓轩", "X2105-唐珞轩", "X2105-杨乐萱", "X2102-陈瑞汐", "X2102-肖雅宁", "X2101-肖梦蕊", "X2006-向诗涵", "X2006-田若辰", "X2003-陈美", "X2003-周静汐", "X2002-丁予兮"],
                "小学跆拳道": ["X2205-米韦霖", "X2205-贺梓轩", "X2205-李奕辰", "X2103-蒲文彬", "X2007-尹池兰", "X2007-张子浩", "X2007-李晟睿", "X2005-吕奕成", "X2005-蒲俊西", "X2005-张茁彦", "X2005-曾思涵", "X2005-杨佳卫", "X2005-陈雅莉", "X2001-黄锦枫"],
                "小学轮滑": ["初中部-彭康诚", "X2403-杨亦凡", "X2304-苏睿泽", "X2304-张恩诚", "X2304-张锦辉", "X2304-申书墨", "X2304-杨凯宸", "X2304-张耀午", "X2304-符弈菡", "X2302-全博岩", "X2204-向子曰", "X2204-唐君浩", "X2204-吴皓宸", "X2204-黄芷涵", "X2202-王彬南", "X2202-禹浩轩", "X2202-刘芷涵", "X2202-舒相宁", "X2202-姚梓乐", "X2201-段志睿", "X2106-米鹏锦", "X2104-詹淯文"],
                "小学动漫": ["X2303-黄子涵", "X2303-谭一诺", "X2203-舒俊辰", "X2203-周伊林", "X2201-朱虹蓉", "X2106-宋雨洁", "X2106-钟婉钰", "X2105-蒋欣悦", "X2105-陈雅芝", "X2104-石冉卉", "X2003-易诗涵", "X2003-吴可萱", "X2002-龙佩杉"],
                "小学创意素描": ["X2101-肖梦蕊", "X2101-江梓菡", "X2101-李鸿烨", "X2101-舒钰程", "X2101-何向远", "X2104-刘雅洁", "X2104-杨若轩", "X2104-陈紫妍", "X2104-彭家怡", "X2104-周柯含"],
                "小学播音主持": ["X2402-江若溪", "X2302-张思琪", "X2302-李卓依", "X2205-吴佳钰", "X2204-张杰", "X2204-胡心怡", "X2202-伍阳", "X2202-姚紫乐", "X2103-尚芷宇", "X2103-王逸", "X2103-蒋艺珂", "X2101-尹殿杰", "X2003-赵俊杰", "X2001-丁芷辰", "X2001-张俊杰"],
                "小学声乐": ["X2403-刘闰康", "X2402-黄千穗", "X2401-向奕熙", "X2304-曾思颖", "X2304-符奕涵", "X2301-舒馨颐", "X2301-向文琳", "X2202-李玥", "X2004-殷会菡", "X2004-蔡怀钰"],
                "小学围棋": ["X2303-李沐阳", "X2303-李冠霖", "X2302-茹子修", "X2205-张锦荣", "X2204-胡俊豪", "X2202-朱婉馨", "X2201-吴昀", "X2101-李懿诚", "X2101-唐敬杰", "X2101-贺梓轩", "X2006-杨佳颖", "X2003-易梓隽"],
                "小学羽毛球": ["X2402-王远滔", "X2402-曾梦欣", "X2402-余沫荀", "X2401-张梦妍", "X2401-陈浩伟", "X2401-黄胤丞", "X2304-杨晨熙", "X2304-唐于然", "X2304-潘源嵘", "X2304-丁严淳", "X2302-张鑫宇", "X2301-姜博远", "X2301-李宇涛", "X2204-杨卓", "X2202-赵俊恺", "X2202-彭芷晴", "X2107-潘美夕", "X2107-孙悦铭", "X2106-谢东呈", "X2106-吴曾乐", "X2106-彭俊菖", "X2106-李泽阳", "X2105-彭敬焯", "X2105-贺秦菡", "X2105-龙坤琳", "X2104-李俊辰", "X2103-金昱辰", "X2103-张书豪", "X2103-舒雨涵", "X2103-梁严之", "X2103-黄陈", "X2103-梁尚楚", "X2102-杨佳睿", "X2102-邓智芳", "X2101-周子然", "X2101-周子棋", "X2101-魏孜轩", "X2101-潘子航", "X2101-向睿", "X2006-刘宇泽", "X2006-杨子诚", "X2006-游子榆", "X2006-向亮至", "X2006-曹东旭", "X2005-蒲纯希", "X2005-曾思涵", "X2003-赵俊杰", "X2002-段彦兮", "X2002-涂乂丹", "X2002-熊梓萱", "X2001-陆铭远", "X2001-刘宇航"],
                "小学篮球": ["X2403-谢易岑", "X2403-张书浩", "X2403-覃思诚", "X2403-易俊熙", "X2401-刘伽妍", "X2401-孟国强", "X2401-杨智凯", "X2204-易琪然", "X2204-杨诺熙", "X2105-雷彦彬", "X2007-杨依琳", "X2005-黄雪瑶"],
                "小学田径": ["X2205-杨博超", "X2202-贺宇轩", "X2202-蒋馨仪", "X2202-赵思默", "X2202-张诗蕊", "X2202-陈珉恩", "X2201-韩宗航", "X2201-郭梓樊", "X2201-曾一凡", "X2201-蒲照辉", "X2201-汪洋", "X2201-董远桥", "X2201-李俊辰", "X2201-王梓睿", "X2106-杨宗衡", "X2006-侯坤", "X2006-杨棂", "X2006-兰俊龙", "X2004-刘宇翔", "X2004-赵辰宇", "X2004-杨明贵", "X2004-贺奕辰", "X2004-肖俊熙", "X2004-陈浩轩", "X2001-纪然", "X2001-易珑志"],
                "小学软笔书法": ["X2402-杨婷媛", "X2401-戴熙成", "X2204-黎泽诚", "X2204-蒲泓旭", "X2204-向娅洁", "X2201-邓圣镨", "X2201-向圣烨", "X2201-易家鸣", "X2006-郑子杨", "X2006-田纬宸", "X2003-杨子乐"],
                "小学素描": ["X2403-曾煜晨", "X2201-马宇茜", "X2201-曹依依", "X2004-陈紫菡", "X2003-唐紫淋", "X2003-林若歆"]
            },
            // 初中部校队
            middle: {
                "初中舞蹈李": ["C2411-蒲玉茹", "C2408-刘苡柔", "C2405-孙湘", "C2405-何馨", "C2404-易好", "C2404-杨雅雯", "C2404-陈嘉沁", "C2404-刘忆梓", "C2404-付塞仪", "C2402-段昭曦"],
                "初中舞蹈周": ["C2502-王梓瑄", "C2503-金彦琳", "C2505-田叶紫", "C2505-李湘媛", "C2505-汪乐萱", "C2506-杨雅琴", "C2508-徐可佳", "C2508-邓紫萱", "C2509-杨若馨", "C2509-陈铱柃", "C2509-涂芷菡", "C2509-唐果", "C2509-肖倪娜", "C2510-满诗语", "C2510-叶谨萱", "C2409-杨谨伊", "C2302-郑欣怡", "C2306-刘诗茜", "C2307-陈奕媛", "C2307-谢雅琪"],
                "初中跆拳道": ["C2508-杨子涵", "C2507-周伟超", "C2506-米紫涵", "C2501-黄子皓", "C2407-孙彪", "C2403-李书含"],
                "初中声乐": ["C2305-李萱", "C2305-向俊熙", "C2312-曾译平", "C2402-谢微", "C2402-陈子茜", "C2405-韩逸菲", "C2405-姚思垣", "C2405-陆浩瑜", "C2408-李紫萱", "C2411-刘晨熙", "C2411-周扬诗韵", "C2502-谢菲", "C2502-刘紫娴", "C2503-刘雄俊", "C2507-刘星姿", "C2509-黄雅芸", "C2509-李桢尧", "C2509-赵彬睿", "C2510-黄倩瑶", "C2510-田瑞欣"],
                "初中素描": ["C2510-王兀昕", "C2507-张紫琪", "C2506-陈梓涵", "C2412-陈芷伊", "C2411-蒲明辉", "C2409-李威辰", "C2409-熊一捷", "C2406-吴梓洋", "C2311-张蔓馨", "C2309-龙心怡", "C2308-张惠淇", "C2307-舒雅琪", "C2306-李佳琦", "C2305-张顺源", "C2301-丁子涵", "C2301-李京矜"],
                "初中田径陈": ["C2511-吴静", "C2510-叶诚洺", "C2510-杨雅雯", "C2510-刘亿", "C2510-杨彬", "C2509-李俊杰", "C2509-向钉瑾", "C2506-向思箐", "C2505-谢景发", "C2501-张栖语", "C2411-向俊旭", "C2411-饶心睿", "C2403-袁文熙", "C2403-杨宇航"],
                "初中田径成": ["C2508-向明宇", "C2412-李杰峰", "C2412-余子涵", "C2412-杨佳蓉", "C2412-刘雨丰", "C2409-唐志强", "C2409-刘子荣", "C2409-印梓涵", "C2408-向诗涵", "C2406-夏秋晨", "C2312-刘鸿", "C2312-向景轩", "C2310-陆军", "C2310-占敏扬", "C2310-彭泽戎", "C2310-杨浩宇", "C2308-李嘉飞", "C2308-江关伟", "C2308-张俊杰", "C2307-包美朵"],
                "初中播音主持": ["C2505-夏乙丹", "C2505-唐艺珊", "C2505-黄文佳", "C2503-张懿臻", "C2412-蒲宣丞", "C2409-陈智华"],
                "初中足球": ["C2511-曾彦博", "C2511-廖琛祥", "C2510-邓博烊", "C2510-杨海翔", "C2510-黄星程", "C2510-田翰轩", "C2509-罗昱奇", "C2508-黄鑫", "C2507-欧阳亿欣", "C2507-金嘉昱", "C2506-刘嘉楠", "C2506-周宇皓", "C2504-李彦廷", "C2503-刘文涛", "C2406-唐梓轩", "C2403-邱俊洋", "C2401-熊淇骏", "C2401-曾大成", "C2312-张嵫杭", "C2312-伍奕铭", "C2309-刘峰玮", "C2306-杨惠翔", "C2306-况虹筑", "C2302-陈俊同"],
                "初中羽毛球": ["C2506-谢富丞", "C2506-彭宸霖", "C2506-杨辰熙", "C2506-彭子玥", "C2412-刘智宇", "C2409-韩浩轩", "C2409-赵子墨", "C2409-刘俊轩", "C2409-杨卓霖", "C2409-黄鸿凯", "C2408-姚震霆", "C2408-向涵宇", "C2406-潘俊", "C2405-乔钰淋", "C2402-唐希睿", "C2312-舒轼", "C2311-杨博林", "C2310-刘恺文", "C2310-吴呈祥", "C2310-丁向宇", "C2310-石福杰", "C2305-乔磊", "C2305-杨子骁"],
                "初中篮球": ["C2511-肖增益", "C2510-唐梓浩", "C2510-刘一枫", "C2509-谭聿横", "C2509-夏振义", "C2504-吴羽泽", "C2504-杨梓晨", "C2504-舒智宇", "C2503-屈文轩", "C2503-周珅旭", "C2503-蔡子晨", "C2503-满兴洋", "C2412-谌锐", "C2412-尹骏熙", "C2412-何钰铭", "C2412-邱绍峰", "C2411-米润", "C2411-邹家伟", "C2411-彭伟轩", "C2402-陈墨轩", "C2401-陈鹏", "C2312-陈子涵", "C2310-龙宣呈", "C2309-谌泽驻", "C2308-张宇翔", "C2308-高海铭", "C2308-吕浩宇", "C2307-翟一凡", "C2306-邓联洲", "C2304-谢翼", "C2304-曾俊铧", "C2304-田荆晨"],
                "初中女子篮球": ["C2507-吴晨俊", "C2507-谌雨泽", "C2504-丁佳琪", "C2503-何宇程", "C2503-何宇桐", "C2407-伍薇琦"],
                "初中武术": ["C2403-严梓睿", "C2306-武子尧"]
            }
        };

        // 管理员状态
        let isAdminLoggedIn = false;

        // 初始化页面
        document.addEventListener('DOMContentLoaded', function() {
            // 生成班级汇总数据
            generateClassSummary();
            
            // 标签页切换
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    document.getElementById(this.dataset.tab + '-content').classList.add('active');
                });
            });
            
            // 搜索功能
            document.getElementById('searchButton').addEventListener('click', performSearch);
            document.getElementById('searchInput').addEventListener('keyup', function(event) {
                if (event.key === 'Enter') {
                    performSearch();
                }
            });
            
            // 重置功能
            document.getElementById('resetButton').addEventListener('click', function() {
                document.getElementById('searchInput').value = '';
                generateClassSummary();
            });
            
            // 管理员登录
            document.getElementById('loginButton').addEventListener('click', adminLogin);
            
            // 管理员退出
            document.getElementById('logoutButton').addEventListener('click', adminLogout);
            
            // 管理员操作按钮
            document.getElementById('addStudentBtn').addEventListener('click', function() {
                document.getElementById('addStudentForm').style.display = 'block';
                document.getElementById('addTeamForm').style.display = 'none';
                populateTeamSelect();
            });
            
            document.getElementById('addTeamBtn').addEventListener('click', function() {
                document.getElementById('addTeamForm').style.display = 'block';
                document.getElementById('addStudentForm').style.display = 'none';
            });
            
            // 表单操作
            document.getElementById('saveStudentBtn').addEventListener('click', saveStudent);
            document.getElementById('cancelStudentBtn').addEventListener('click', function() {
                document.getElementById('addStudentForm').style.display = 'none';
                clearStudentForm();
            });
            
            document.getElementById('saveTeamBtn').addEventListener('click', saveTeam);
            document.getElementById('cancelTeamBtn').addEventListener('click', function() {
                document.getElementById('addTeamForm').style.display = 'none';
                clearTeamForm();
            });
        });

        // 生成班级汇总数据
        function generateClassSummary() {
            // 清空现有内容
            document.getElementById('primary-classes').innerHTML = '';
            document.getElementById('middle-classes').innerHTML = '';
            
            // 生成小学部班级汇总
            const primaryClasses = organizeByClass(teamData.primary);
            renderClassSummary('primary-classes', primaryClasses);
            
            // 生成初中部班级汇总
            const middleClasses = organizeByClass(teamData.middle);
            renderClassSummary('middle-classes', middleClasses);
        }

        // 按班级组织数据
        function organizeByClass(teamsData) {
            const classes = {};
            
            for (const [teamName, students] of Object.entries(teamsData)) {
                students.forEach(student => {
                    const [classInfo, studentName] = student.split('-');
                    if (!classes[classInfo]) {
                        classes[classInfo] = {};
                    }
                    if (!classes[classInfo][teamName]) {
                        classes[classInfo][teamName] = [];
                    }
                    classes[classInfo][teamName].push(studentName);
                });
            }
            
            return classes;
        }

        // 渲染班级汇总
        function renderClassSummary(containerId, classesData) {
            const container = document.getElementById(containerId);
            
            if (Object.keys(classesData).length === 0) {
                container.innerHTML = '<div class="no-results">暂无数据</div>';
                return;
            }
            
            // 按班级排序
            const sortedClasses = Object.keys(classesData).sort((a, b) => {
                // 提取班级编号进行比较
                const aNum = parseInt(a.replace(/[^\d]/g, ''));
                const bNum = parseInt(b.replace(/[^\d]/g, ''));
                return aNum - bNum;
            });
            
            sortedClasses.forEach(classInfo => {
                const classCard = document.createElement('div');
                classCard.className = 'class-card';
                
                const classHeader = document.createElement('div');
                classHeader.className = 'class-header';
                classHeader.textContent = classInfo;
                
                const teamList = document.createElement('div');
                teamList.className = 'team-list';
                
                for (const [teamName, students] of Object.entries(classesData[classInfo])) {
                    const teamItem = document.createElement('div');
                    teamItem.className = 'team-item';
                    
                    const teamHeader = document.createElement('div');
                    teamHeader.className = 'team-header';
                    
                    const teamNameDiv = document.createElement('div');
                    teamNameDiv.className = 'team-name';
                    teamNameDiv.innerHTML = `${teamName} <span class="team-count">${students.length}</span>`;
                    
                    const expandIcon = document.createElement('span');
                    expandIcon.className = 'expand-icon';
                    expandIcon.innerHTML = '▼';
                    
                    teamHeader.appendChild(teamNameDiv);
                    teamHeader.appendChild(expandIcon);
                    
                    const studentList = document.createElement('div');
                    studentList.className = 'student-list';
                    
                    students.forEach(student => {
                        const studentItem = document.createElement('div');
                        studentItem.className = 'student-item';
                        
                        const studentNameDiv = document.createElement('div');
                        studentNameDiv.className = 'student-name';
                        studentNameDiv.textContent = student;
                        
                        studentItem.appendChild(studentNameDiv);
                        
                        // 如果是管理员登录状态，显示删除按钮
                        if (isAdminLoggedIn) {
                            const deleteBtn = document.createElement('button');
                            deleteBtn.className = 'delete-btn';
                            deleteBtn.textContent = '删除';
                            deleteBtn.addEventListener('click', function() {
                                deleteStudent(classInfo, teamName, student);
                            });
                            
                            studentItem.appendChild(deleteBtn);
                        }
                        
                        studentList.appendChild(studentItem);
                    });
                    
                    // 点击展开/收起学生名单
                    teamHeader.addEventListener('click', function() {
                        this.classList.toggle('expanded');
                        studentList.classList.toggle('expanded');
                    });
                    
                    teamItem.appendChild(teamHeader);
                    teamItem.appendChild(studentList);
                    teamList.appendChild(teamItem);
                }
                
                classCard.appendChild(classHeader);
                classCard.appendChild(teamList);
                container.appendChild(classCard);
            });
        }

        // 执行搜索
        function performSearch() {
            const searchTerm = document.getElementById('searchInput').value.trim().toLowerCase();
            
            if (!searchTerm) {
                generateClassSummary();
                return;
            }
            
            // 搜索小学部
            const filteredPrimary = filterTeams(teamData.primary, searchTerm);
            const primaryClasses = organizeByClass(filteredPrimary);
            document.getElementById('primary-classes').innerHTML = '';
            renderClassSummary('primary-classes', primaryClasses);
            
            // 搜索初中部
            const filteredMiddle = filterTeams(teamData.middle, searchTerm);
            const middleClasses = organizeByClass(filteredMiddle);
            document.getElementById('middle-classes').innerHTML = '';
            renderClassSummary('middle-classes', middleClasses);
        }

        // 过滤校队数据
        function filterTeams(teamsData, searchTerm) {
            const filtered = {};
            
            for (const [teamName, students] of Object.entries(teamsData)) {
                // 检查校队名称是否匹配
                if (teamName.toLowerCase().includes(searchTerm)) {
                    filtered[teamName] = students;
                    continue;
                }
                
                // 检查学生是否匹配
                const matchingStudents = students.filter(student => {
                    const [classInfo, studentName] = student.split('-');
                    return classInfo.toLowerCase().includes(searchTerm) || 
                           studentName.toLowerCase().includes(searchTerm);
                });
                
                if (matchingStudents.length > 0) {
                    filtered[teamName] = matchingStudents;
                }
            }
            
            return filtered;
        }

        // 管理员登录
        function adminLogin() {
            const username = document.getElementById('adminUsername').value;
            const password = document.getElementById('adminPassword').value;
            
            if (username === 'llxxytb' && password === 'llxxytb2026') {
                isAdminLoggedIn = true;
                document.getElementById('adminLogin').style.display = 'none';
                document.getElementById('adminActions').style.display = 'block';
                generateClassSummary(); // 重新生成以显示删除按钮
                alert('管理员登录成功！');
            } else {
                alert('账号或密码错误！');
            }
        }

        // 管理员退出
        function adminLogout() {
            isAdminLoggedIn = false;
            document.getElementById('adminLogin').style.display = 'flex';
            document.getElementById('adminActions').style.display = 'none';
            document.getElementById('addStudentForm').style.display = 'none';
            document.getElementById('addTeamForm').style.display = 'none';
            clearStudentForm();
            clearTeamForm();
            generateClassSummary(); // 重新生成以隐藏删除按钮
            alert('已退出管理员登录');
        }

        // 填充校队选择框
        function populateTeamSelect() {
            const select = document.getElementById('studentTeam');
            select.innerHTML = '';
            
            // 添加小学部校队
            const primaryGroup = document.createElement('optgroup');
            primaryGroup.label = '小学部';
            Object.keys(teamData.primary).forEach(team => {
                const option = document.createElement('option');
                option.value = team;
                option.textContent = team;
                primaryGroup.appendChild(option);
            });
            select.appendChild(primaryGroup);
            
            // 添加初中部校队
            const middleGroup = document.createElement('optgroup');
            middleGroup.label = '初中部';
            Object.keys(teamData.middle).forEach(team => {
                const option = document.createElement('option');
                option.value = team;
                option.textContent = team;
                middleGroup.appendChild(option);
            });
            select.appendChild(middleGroup);
        }

        // 保存学生
        function saveStudent() {
            const name = document.getElementById('studentName').value.trim();
            const className = document.getElementById('studentClass').value.trim();
            const team = document.getElementById('studentTeam').value;
            
            if (!name || !className || !team) {
                alert('请填写完整信息！');
                return;
            }
            
            // 确定学部
            let department = 'primary';
            if (team in teamData.middle) {
                department = 'middle';
            }
            
            // 添加学生
            const studentInfo = `${className}-${name}`;
            if (!teamData[department][team].includes(studentInfo)) {
                teamData[department][team].push(studentInfo);
                document.getElementById('addStudentForm').style.display = 'none';
                clearStudentForm();
                generateClassSummary();
                alert('学生添加成功！');
            } else {
                alert('该学生已在该校队中！');
            }
        }

        // 删除学生
        function deleteStudent(className, teamName, studentName) {
            if (confirm(`确定要删除 ${className} 班的 ${studentName} 同学吗？`)) {
                // 确定学部
                let department = 'primary';
                if (teamName in teamData.middle) {
                    department = 'middle';
                }
                
                // 删除学生
                const studentInfo = `${className}-${studentName}`;
                const index = teamData[department][teamName].indexOf(studentInfo);
                if (index > -1) {
                    teamData[department][teamName].splice(index, 1);
                    generateClassSummary();
                    alert('学生删除成功！');
                }
            }
        }

        // 保存校队
        function saveTeam() {
            const teamName = document.getElementById('newTeamName').value.trim();
            const teamType = document.getElementById('newTeamType').value;
            
            if (!teamName) {
                alert('请输入校队名称！');
                return;
            }
            
            // 检查校队是否已存在
            if (teamData[teamType][teamName]) {
                alert('该校队已存在！');
                return;
            }
            
            // 添加校队
            teamData[teamType][teamName] = [];
            document.getElementById('addTeamForm').style.display = 'none';
            clearTeamForm();
            generateClassSummary();
            alert('校队添加成功！');
        }

        // 清空学生表单
        function clearStudentForm() {
            document.getElementById('studentName').value = '';
            document.getElementById('studentClass').value = '';
        }

        // 清空校队表单
        function clearTeamForm() {
            document.getElementById('newTeamName').value = '';
            document.getElementById('newTeamType').value = 'primary';
        }
    </script>
</body>
</html>